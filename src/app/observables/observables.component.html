<section class="main-section" id="Overview">
  <header style="display:none;">Overview</header>
  <div id="Observable">
    <header>Observable</header>
    <p>Observables are lazy Push collections of multiple values. They fill the missing spot in the following table:</p>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>Single</th>
          <th>Multiple</th>
        </tr>
      </thead>
        <tbody>
          <tr>
            <td><strong>Pull</strong></td>
            <td><a href="https://developer.mozilla.org/en-US/docs/Glossary/Function"><code>Function</code></a></td>
            <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols"><code>Iterator</code></a></td>
          </tr>
          <tr>
            <td><strong>Push</strong></td>
            <td><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise"><code>Promise</code></a></td>
            <td><a href="../class/es6/Observable.js~Observable.html"><code>Observable</code></a></td>
          </tr>
      </tbody>
    </table>
    <p><strong>Example.</strong> The following is an Observable that pushes the values <code>1</code>, <code>2</code>, <code>3</code> immediately (synchronously) when subscribed, and the value <code>4</code> after one second has passed since the subscribe call, then completes:</p>
    
    <div class="code-example">
      <code><pre class="prettyprint lang-ts">
        <code><span class="kwd">import</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln"> </span><span class="typ">Observable</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> from </span><span class="str">'rxjs'</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">const</span><span class="pln"> observable </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
    observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
    observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span><span class="pln">
    observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">3</span><span class="pun">);</span><span class="pln">
    setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
      observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">4</span><span class="pun">);</span><span class="pln">
      observer</span><span class="pun">.</span><span class="pln">complete</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">});</span></code>
      </pre></code></div>
    <p>To invoke the Observable and see these values, we need to <em>subscribe</em> to it:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
      <code class="animated fadeIn"><ol class="linenums"><li class="L0"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln"> </span><span class="typ">Observable</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> from </span><span class="str">'rxjs'</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">const</span><span class="pln"> observable </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L3"><span class="pln">  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></li><li class="L4"><span class="pln">  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span></li><li class="L5"><span class="pln">  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">3</span><span class="pun">);</span></li><li class="L6"><span class="pln">  setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L7"><span class="pln">    observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">4</span><span class="pun">);</span></li><li class="L8"><span class="pln">    observer</span><span class="pun">.</span><span class="pln">complete</span><span class="pun">();</span></li><li class="L9"><span class="pln">  </span><span class="pun">},</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">);</span></li><li class="L0"><span class="pun">});</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'just before subscribe'</span><span class="pun">);</span></li><li class="L3"><span class="pln">observable</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">({{ '{' }}</span></li><li class="L4"><span class="pln">  next</span><span class="pun">:</span><span class="pln"> x </span><span class="pun">=&gt;</span><span class="pln"> console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'got value '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> x</span><span class="pun">),</span></li><li class="L5"><span class="pln">  error</span><span class="pun">:</span><span class="pln"> err </span><span class="pun">=&gt;</span><span class="pln"> console</span><span class="pun">.</span><span class="pln">error</span><span class="pun">(</span><span class="str">'something wrong occurred: '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> err</span><span class="pun">),</span></li><li class="L6"><span class="pln">  complete</span><span class="pun">:</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'done'</span><span class="pun">),</span></li><li class="L7"><span class="pun">});</span></li><li class="L8"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'just after subscribe'</span><span class="pun">);</span></li></ol></code>
     </pre></code></div>
    <p>Which executes as such on the console:</p>
    <div class="code-example"><code><pre class="prettyprint lang-none">
      <code class="animated fadeIn"><span class="pln">just before subscribe
got </span><span class="kwd">value</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
got </span><span class="kwd">value</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
got </span><span class="kwd">value</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
just after subscribe
got </span><span class="kwd">value</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="kwd">done</span></code>
    </pre></code></div>
    
    <h2 id="pull-versus-push">Pull versus Push</h2>
    <p><em>Pull</em> and <em>Push</em> are two different protocols that describe how a data <em>Producer</em> can communicate with a data <em>Consumer</em>.</p>
    <p><strong>What is Pull?</strong> In Pull systems, the Consumer determines when it receives data from the data Producer. The Producer itself is unaware of when the data will be delivered to the Consumer.</p>
    <p>Every JavaScript Function is a Pull system. The function is a Producer of data, and the code that calls the function is consuming it by "pulling" out a <em>single</em> return value from its call.</p>
    <p>ES2015 introduced <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*">generator functions and iterators</a> (<code>function*</code>), another type of Pull system. Code that calls <code>iterator.next()</code> is the Consumer, "pulling" out <em>multiple</em> values from the iterator (the Producer).</p>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>Producer</th>
          <th>Consumer</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Pull</strong></td>
          <td><strong>Passive:</strong>
           produces data when requested.</td>
          <td><strong>Active:</strong>
           decides when data is requested.</td>
        </tr>
        <tr>
          <td><strong>Push</strong></td>
          <td><strong>Active:</strong>
           produces data at its own pace.</td>
          <td><strong>Passive:</strong>
           reacts to received data.</td>
        </tr>
      </tbody>
    </table>
    <p><strong>What is Push?</strong> In Push systems, the Producer determines when to send data to the Consumer. The Consumer is unaware of when it will receive that data.</p>
    <p>Promises are the most common type of Push system in JavaScript today. A Promise (the Producer) delivers a resolved value to registered callbacks (the Consumers), but unlike functions, it is the Promise which is in charge of determining precisely when that value is "pushed" to the callbacks.</p>
    <p>RxJS introduces Observables, a new Push system for JavaScript. An Observable is a Producer of multiple values, "pushing" them to Observers (Consumers).</p>
    <ul>
      <li>A <strong>Function</strong> is a lazily evaluated computation that synchronously returns a single value on invocation.</li>
      <li>A <strong>generator</strong> is a lazily evaluated computation that synchronously returns zero to (potentially) infinite values on iteration.</li>
      <li>A <strong>Promise</strong> is a computation that may (or may not) eventually return a single value.</li>
      <li>An <strong>Observable</strong> is a lazily evaluated computation that can synchronously or asynchronously return zero to (potentially) infinite values from the time it's invoked onwards.</li>
    </ul>
    <h2 id="observables-as-generalizations-of-functions">Observables as generalizations of functions</h2>
    <p>Contrary to popular claims, Observables are not like EventEmitters nor are they like Promises for multiple values. Observables <em>may act</em> like EventEmitters in some cases, namely when they are multicasted using RxJS Subjects, but usually they don't act like EventEmitters.</p>
    <p><span class="informal">Observables are like functions with zero arguments, but generalize those to allow multiple values.</span></p>
    <p>Consider the following:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
    <code class="animated fadeIn"><span class="kwd">function</span><span class="pln"> foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'Hello'</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">return</span><span class="pln"> </span><span class="lit">42</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> foo</span><span class="pun">.</span><span class="pln">call</span><span class="pun">();</span><span class="pln"> </span><span class="com">// same as foo()</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> foo</span><span class="pun">.</span><span class="pln">call</span><span class="pun">();</span><span class="pln"> </span><span class="com">// same as foo()</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">y</span><span class="pun">);</span></code>
    </pre></code></div>
    <p>We expect to see as output:</p>
    <div class="code-example"><code><pre class="prettyprint lang-none">
    <code class="animated fadeIn"><span class="str">"Hello"</span><span class="pln">
</span><span class="lit">42</span><span class="pln">
</span><span class="str">"Hello"</span><span class="pln">
</span><span class="lit">42</span></code>
    </pre></code></div>
    <p>You can write the same behavior above, but with Observables:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
    <code class="animated fadeIn"><ol class="linenums"><li class="L0"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln"> </span><span class="typ">Observable</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> from </span><span class="str">'rxjs'</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">const</span><span class="pln"> foo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L3"><span class="pln">  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'Hello'</span><span class="pun">);</span></li><li class="L4"><span class="pln">  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">42</span><span class="pun">);</span></li><li class="L5"><span class="pun">});</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">foo</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L8"><span class="pln">  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x</span><span class="pun">);</span></li><li class="L9"><span class="pun">});</span></li><li class="L0"><span class="pln">foo</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L1"><span class="pln">  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">y</span><span class="pun">);</span></li><li class="L2"><span class="pun">});</span></li></ol></code>
    </pre></code></div>
    <p>And the output is the same:</p>
    <div class="code-example"><code><pre class="prettyprint lang-none">
      <code class="animated fadeIn"><span class="str">"Hello"</span><span class="pln">
</span><span class="lit">42</span><span class="pln">
</span><span class="str">"Hello"</span><span class="pln">
</span><span class="lit">42</span></code>
    </pre></code></div>
    <p>This happens because both functions and Observables are lazy computations. If you don't call the function, the <code>console.log('Hello')</code> won't happen. Also with Observables, if you don't "call" it (with <code>subscribe</code>), the <code>console.log('Hello')</code> won't happen. Plus, "calling" or "subscribing" is an isolated operation: two function calls trigger two separate side effects, and two Observable subscribes trigger two separate side effects. As opposed to EventEmitters which share the side effects and have eager execution regardless of the existence of subscribers, Observables have no shared execution and are lazy.</p>
    <p><span class="informal">Subscribing to an Observable is analogous to calling a Function.</span></p>
    <p>Some people claim that Observables are asynchronous. That is not true. If you surround a function call with logs, like this:</p>
    <div class="code-example"><code><pre class="prettyprint lang-js">
    <code><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'before'</span><span class="pun">);</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">foo</span><span class="pun">.</span><span class="pln">call</span><span class="pun">());</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'after'</span><span class="pun">);</span></code>
    </pre></code></div>
    <p>You will see the output:</p>
    <div class="code-example"><code><pre class="prettyprint lang-none">
    <code class="animated fadeIn"><span class="str">"before"</span><span class="pln">
</span><span class="str">"Hello"</span><span class="pln">
</span><span class="lit">42</span><span class="pln">
</span><span class="str">"after"</span></code>
    </pre></code></div>
    <p>And this is the same behavior with Observables:</p>
    <div class="code-example"><code><pre class="prettyprint lang-js">
    <code class="animated fadeIn"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'before'</span><span class="pun">);</span><span class="pln">
foo</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'after'</span><span class="pun">);</span></code>
    </pre></code></div>
    <p>And the output is:</p>
    <div class="code-example"><code><pre class="prettyprint lang-none">
      <code><span class="str">"before"</span><span class="pln">
</span><span class="str">"Hello"</span><span class="pln">
</span><span class="lit">42</span><span class="pln">
</span><span class="str">"after"</span></code>
    </pre></code></div>
    <p>Which proves the subscription of <code>foo</code> was entirely synchronous, just like a function.</p>
    <p><span class="informal">Observables are able to deliver values either synchronously or asynchronously.</span></p>
    <p>What is the difference between an Observable and a function? <strong>Observables can "return" multiple values over time</strong>, something which functions cannot. You can't do this:</p>
    <div class="code-example"><code><pre class="prettyprint lang-js">
      <code class="animated fadeIn"><span class="kwd">function</span><span class="pln"> foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'Hello'</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">return</span><span class="pln"> </span><span class="lit">42</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">return</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><span class="pln"> </span><span class="com">// dead code. will never happen</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></code></div>
    <p>Functions can only return one value. Observables, however, can do this:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
      <code class="animated fadeIn"><ol class="linenums"><li class="L0"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln"> </span><span class="typ">Observable</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> from </span><span class="str">'rxjs'</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">const</span><span class="pln"> foo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L3"><span class="pln">  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'Hello'</span><span class="pun">);</span></li><li class="L4"><span class="pln">  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">42</span><span class="pun">);</span></li><li class="L5"><span class="pln">  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">100</span><span class="pun">);</span><span class="pln"> </span><span class="com">// "return" another value</span></li><li class="L6"><span class="pln">  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">200</span><span class="pun">);</span><span class="pln"> </span><span class="com">// "return" yet another</span></li><li class="L7"><span class="pun">});</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'before'</span><span class="pun">);</span></li><li class="L0"><span class="pln">foo</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L1"><span class="pln">  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x</span><span class="pun">);</span></li><li class="L2"><span class="pun">});</span></li><li class="L3"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'after'</span><span class="pun">);</span></li></ol></code>
    </pre></code></div>
    <p>With synchronous output:</p>
    <div class="code-example"><code><pre class="prettyprint lang-none">
    <code class="animated fadeIn"><span class="str">"before"</span><span class="pln">
</span><span class="str">"Hello"</span><span class="pln">
</span><span class="lit">42</span><span class="pln">
</span><span class="lit">100</span><span class="pln">
</span><span class="lit">200</span><span class="pln">
</span><span class="str">"after"</span></code>
    </pre></code></div>
    <p>But you can also "return" values asynchronously:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
      <code class="animated fadeIn"><ol class="linenums"><li class="L0"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln"> </span><span class="typ">Observable</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> from </span><span class="str">'rxjs'</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">const</span><span class="pln"> foo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L3"><span class="pln">  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'Hello'</span><span class="pun">);</span></li><li class="L4"><span class="pln">  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">42</span><span class="pun">);</span></li><li class="L5"><span class="pln">  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">100</span><span class="pun">);</span></li><li class="L6"><span class="pln">  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">200</span><span class="pun">);</span></li><li class="L7"><span class="pln">  setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L8"><span class="pln">    observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">300</span><span class="pun">);</span><span class="pln"> </span><span class="com">// happens asynchronously</span></li><li class="L9"><span class="pln">  </span><span class="pun">},</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">);</span></li><li class="L0"><span class="pun">});</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'before'</span><span class="pun">);</span></li><li class="L3"><span class="pln">foo</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L4"><span class="pln">  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x</span><span class="pun">);</span></li><li class="L5"><span class="pun">});</span></li><li class="L6"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'after'</span><span class="pun">);</span></li></ol></code>
    </pre></code></div>
    <p>With output:</p>
    <div class="code-example"><code><pre class="prettyprint lang-none">
      <code class="animated fadeIn"><span class="str">"before"</span><span class="pln">
</span><span class="str">"Hello"</span><span class="pln">
</span><span class="lit">42</span><span class="pln">
</span><span class="lit">100</span><span class="pln">
</span><span class="lit">200</span><span class="pln">
</span><span class="str">"after"</span><span class="pln">
</span><span class="lit">300</span></code>
    </pre></code></div>
    <p>Conclusion:</p>
    <ul>
      <li><code>func.call()</code> means "<em>give me one value synchronously</em>"</li>
      <li><code>observable.subscribe()</code> means "<em>give me any amount of values, either synchronously or asynchronously</em>"</li>
    </ul>
    <h2 id="anatomy-of-an-observable">Anatomy of an Observable</h2>
    <p>Observables are <strong>created</strong> using <code>Observable.create</code> or a creation operator, are <strong>subscribed</strong> to with an Observer, <strong>execute</strong> to deliver <code>next</code> / <code>error</code> / <code>complete</code> notifications to the Observer, and their execution may be <strong>disposed</strong>. These four aspects are all encoded in an Observable instance, but some of these aspects are related to other types, like Observer and Subscription.</p>
    <p>Core Observable concerns:</p>
    <ul>
      <li><strong>Creating</strong> Observables</li>
      <li><strong>Subscribing</strong> to Observables</li>
      <li><strong>Executing</strong> the Observable</li>
      <li><strong>Disposing</strong> Observables</li>
    </ul>
    <h3 id="creating-observables">Creating Observables</h3>
    <p><code>Observable.create</code> is an alias for the <code>Observable</code> constructor, and it takes one argument: the <code>subscribe</code> function.</p>
    <p>The following example creates an Observable to emit the string <code>'hi'</code> every second to an Observer.</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln"> </span><span class="typ">Observable</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> from </span><span class="str">'rxjs'</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> observable </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> subscribe</span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> setInterval</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="str">'hi'</span><span class="pun">)</span><span class="pln">
</span><span class="pun">},</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code>
    </pre></code></div>
    <p><span class="informal">Observables can be created with <code>create</code>, but usually we use the so-called <a href="./overview.html#creation-operators">creation operators</a>, like <code>of</code>, <code>from</code>, <code>interval</code>, etc.</span></p>
    <p>In the example above, the <code>subscribe</code> function is the most important piece to describe the Observable. Let's look at what subscribing means.</p>
    <h3 id="subscribing-to-observables">Subscribing to Observables</h3>
    <p>The Observable <code>observable</code> in the example can be <em>subscribed</em> to, like this:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
      <code class="animated fadeIn"><span class="pln">observable</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(</span><span class="pln">x </span><span class="pun">=&gt;</span><span class="pln"> console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x</span><span class="pun">));</span></code>
    </pre></code></div>
    <p>It is not a coincidence that <code>observable.subscribe</code> and <code>subscribe</code> in <code>Observable.create(function subscribe(observer) {{ '{' }}...})</code> have the same name. In the library, they are different, but for practical purposes you can consider them conceptually equal.</p>
    <p>This shows how <code>subscribe</code> calls are not shared among multiple Observers of the same Observable. When calling <code>observable.subscribe</code> with an Observer, the function <code>subscribe</code> in <code>Observable.create(function subscribe(observer) {{ '{' }}...})</code> is run for that given Observer. Each call to <code>observable.subscribe</code> triggers its own independent setup for that given Observer.</p>
    <p><span class="informal">Subscribing to an Observable is like calling a function, providing callbacks where the data will be delivered to.</span></p>
    <p>This is drastically different to event handler APIs like <code>addEventListener</code> / <code>removeEventListener</code>. With <code>observable.subscribe</code>, the given Observer is not registered as a listener in the Observable. The Observable does not even maintain a list of attached Observers.</p>
    <p>A <code>subscribe</code> call is simply a way to start an "Observable execution" and deliver values or events to an Observer of that execution.</p>
    <h3 id="executing-observables">Executing Observables</h3>
    <p>The code inside <code>Observable.create(function subscribe(observer) {{ '{' }}...})</code> represents an "Observable execution", a lazy computation that only happens for each Observer that subscribes. The execution produces multiple values over time, either synchronously or asynchronously.</p>
    <p>There are three types of values an Observable Execution can deliver:</p>
    <ul>
      <li>"Next" notification: sends a value such as a Number, a String, an Object, etc.</li>
      <li>"Error" notification: sends a JavaScript Error or exception.</li>
      <li>"Complete" notification: does not send a value.</li>
    </ul>
    <p>Next notifications are the most important and most common type: they represent actual data being delivered to an Observer. Error and Complete notifications may happen only once during the Observable Execution, and there can only be either one of them.</p>
    <p>These constraints are expressed best in the so-called <em>Observable Grammar</em> or <em>Contract</em>, written as a regular expression:</p>
    <div class="code-example"><code><pre class="prettyprint lang-none">
    <code class="animated fadeIn"><span class="kwd">next</span><span class="pun">*(</span><span class="pln">error</span><span class="pun">|</span><span class="pln">complete</span><span class="pun">)?</span></code>
  </pre></code></div>
    <span class="informal">In an Observable Execution, zero to infinite Next notifications may be delivered. If either an Error or Complete notification is delivered, then nothing else can be delivered afterwards.</span>
    <p>The following is an example of an Observable execution that delivers three Next notifications, then completes:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
    <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln"> </span><span class="typ">Observable</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> from </span><span class="str">'rxjs'</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> observable </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> subscribe</span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span><span class="pln">
observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">3</span><span class="pun">);</span><span class="pln">
observer</span><span class="pun">.</span><span class="pln">complete</span><span class="pun">();</span><span class="pln">
</span><span class="pun">});</span></code>
  </pre></code></div>
    <p>Observables strictly adhere to the Observable Contract, so the following code would not deliver the Next notification <code>4</code>:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
    <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln"> </span><span class="typ">Observable</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> from </span><span class="str">'rxjs'</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> observable </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> subscribe</span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span><span class="pln">
observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">3</span><span class="pun">);</span><span class="pln">
observer</span><span class="pun">.</span><span class="pln">complete</span><span class="pun">();</span><span class="pln">
observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">4</span><span class="pun">);</span><span class="pln"> </span><span class="com">// Is not delivered because it would violate the contract</span><span class="pln">
</span><span class="pun">});</span></code>
  </pre></code></div>
    <p>It is a good idea to wrap any code in <code>subscribe</code> with <code>try</code>/<code>catch</code> block that will deliver an Error notification if it catches an exception:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
    <code class="animated fadeIn"><ol class="linenums"><li class="L0"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln"> </span><span class="typ">Observable</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> from </span><span class="str">'rxjs'</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">const</span><span class="pln"> observable </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> subscribe</span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L3"><span class="pln">  </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L4"><span class="pln">    observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></li><li class="L5"><span class="pln">    observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span></li><li class="L6"><span class="pln">    observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="lit">3</span><span class="pun">);</span></li><li class="L7"><span class="pln">    observer</span><span class="pun">.</span><span class="pln">complete</span><span class="pun">();</span></li><li class="L8"><span class="pln">  </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L9"><span class="pln">    observer</span><span class="pun">.</span><span class="pln">error</span><span class="pun">(</span><span class="pln">err</span><span class="pun">);</span><span class="pln"> </span><span class="com">// delivers an error if it caught one</span></li><li class="L0"><span class="pln">  </span><span class="pun">}</span></li><li class="L1"><span class="pun">});</span></li></ol></code>
  </pre></code></div>
    <h3 id="disposing-observable-executions">Disposing Observable Executions</h3>
    <p>Because Observable Executions may be infinite, and it's common for an Observer to want to abort execution in finite time, we need an API for canceling an execution. Since each execution is exclusive to one Observer only, once the Observer is done receiving values, it has to have a way to stop the execution, in order to avoid wasting computation power or memory resources.</p>
    <p>When <code>observable.subscribe</code> is called, the Observer gets attached to the newly created Observable execution. This call also returns an object, the <code>Subscription</code>:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
    <code class="animated fadeIn"><span class="kwd">const</span><span class="pln"> subscription </span><span class="pun">=</span><span class="pln"> observable</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(</span><span class="pln">x </span><span class="pun">=&gt;</span><span class="pln"> console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x</span><span class="pun">));</span></code>
  </pre></code></div>
    <p>The Subscription represents the ongoing execution, and has a minimal API which allows you to cancel that execution. Read more about the <a href="./guide/subscription"><code>Subscription</code> type here</a>. With <code>subscription.unsubscribe()</code> you can cancel the ongoing execution:</p>
    <div class="code-example"><code><pre class="prettyprint lang-ts">
    <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln"> </span><span class="typ">Observable</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> from </span><span class="str">'rxjs'</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> observable </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">from</span><span class="pun">([</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">20</span><span class="pun">,</span><span class="pln"> </span><span class="lit">30</span><span class="pun">]);</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> subscription </span><span class="pun">=</span><span class="pln"> observable</span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(</span><span class="pln">x </span><span class="pun">=&gt;</span><span class="pln"> console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x</span><span class="pun">));</span><span class="pln">
</span><span class="com">// Later:</span><span class="pln">
subscription</span><span class="pun">.</span><span class="pln">unsubscribe</span><span class="pun">();</span></code>
  </pre></code></div>
    <p><span class="informal">When you subscribe, you get back a Subscription, which represents the ongoing execution. Just call <code>unsubscribe()</code> to cancel the execution.</span></p>
    <p>Each Observable must define how to dispose resources of that execution when we create the Observable using <code>create()</code>. You can do that by returning a custom <code>unsubscribe</code> function from within <code>function subscribe()</code>.</p>
    <p>For instance, this is how we clear an interval execution set with <code>setInterval</code>:</p>
    <div class="code-example"><code><pre class="prettyprint lang-js">
    <code class="animated fadeIn"><span class="kwd">var</span><span class="pln"> observable </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Rx</span><span class="pun">.</span><span class="typ">Observable</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> subscribe</span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
</span><span class="com">// Keep track of the interval resource</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> intervalID </span><span class="pun">=</span><span class="pln"> setInterval</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
  observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="str">'hi'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">},</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">);</span><span class="pln">

</span><span class="com">// Provide a way of canceling and disposing the interval resource</span><span class="pln">
</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> unsubscribe</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{{ '{' }}</span><span class="pln">
  clearInterval</span><span class="pun">(</span><span class="pln">intervalID</span><span class="pun">);</span><span class="pln">
</span><span class="pun">};</span><span class="pln">
</span><span class="pun">});</span></code>
  </pre></code></div>
    <p>Just like <code>observable.subscribe</code> resembles <code>Observable.create(function subscribe() {{ '{' }}...})</code>, the <code>unsubscribe</code> we return from <code>subscribe</code> is conceptually equal to <code>subscription.unsubscribe</code>. In fact, if we remove the ReactiveX types surrounding these concepts, we're left with rather straightforward JavaScript.</p>
    <div class="code-example"><code><pre class="prettyprint lang-js">
    <code class="animated fadeIn"><ol class="linenums"><li class="L0"><span class="kwd">function</span><span class="pln"> subscribe</span><span class="pun">(</span><span class="pln">observer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L1"><span class="pln">  </span><span class="kwd">var</span><span class="pln"> intervalID </span><span class="pun">=</span><span class="pln"> setInterval</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L2"><span class="pln">    observer</span><span class="pun">.</span><span class="pln">next</span><span class="pun">(</span><span class="str">'hi'</span><span class="pun">);</span></li><li class="L3"><span class="pln">  </span><span class="pun">},</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">);</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> unsubscribe</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{{ '{' }}</span></li><li class="L6"><span class="pln">    clearInterval</span><span class="pun">(</span><span class="pln">intervalID</span><span class="pun">);</span></li><li class="L7"><span class="pln">  </span><span class="pun">};</span></li><li class="L8"><span class="pun">}</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="kwd">var</span><span class="pln"> unsubscribe </span><span class="pun">=</span><span class="pln"> subscribe</span><span class="pun">({{ '{' }}</span><span class="pln">next</span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)});</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="com">// Later:</span></li><li class="L3"><span class="pln">unsubscribe</span><span class="pun">();</span><span class="pln"> </span><span class="com">// dispose the resources</span></li></ol></code>
  </pre></code></div>
    <p>The reason why we use Rx types like Observable, Observer, and Subscription is to get safety (such as the Observable Contract) and composability with Operators.</p>
  </div>
</section>
